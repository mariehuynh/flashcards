<html>
<head>
  <title>Algorithms for Philomaths: Flashcards</title>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://static.firebase.com/v0/firebase.js"></script>
  <link rel="stylesheet" type="text/css" href="https://www.firebase.com/css/example.css">
</head>

<body class="cards-body">
  <h1>Firebase Flashcards </h1>
  <div>
    <canvas id="canvas0" width="500" height="500"></canvas>
  </div>
  <input type="button" id="easyButton" value="That was Easy" />
  <input type="button" id="flipButton" value="Flip"          />
  <input type="button" id="hardButton" value="That was Hard" />


<script type="text/javascript">

  var canvas = $("#canvas0").get(0);
  if (!canvas || !canvas.getContext || !canvas.getContext('2d'))
    alert("You must use a browser that supports HTML5 Canvas to run this demo.");

  function start() {
    var cardsRef = new Firebase('https://mariehuynh.firebaseio.com/');
    var cardsController = new Cards.Controller(cardsRef);
  }

  var Cards = {};


  /**
   * Represents a single card
   */

  Cards.Card = function (front, back, notes) {
    // Initialize the card
    this.cardID = Math.floor(Math.random() * 1000000);
    this.front = front;
    this.back = back;
    this.notes = notes;
  };

  /**
   * Writes the current card data into Firebase.
   */
  Cards.Card.prototype.writeToFirebase = function (cardRef) {


    cardRef.child(this.cardID).set({ front: this.front, back: this.back, notes: this.notes});
  };


  /**
   * Stores the state of a flashcards stack and handles drawing it.
   */
  Cards.Stack = function (canvas, playerRef) {
    this.playerRef = playerRef;
    this.snapshot = null;

    /*
    // Listen for changes to our board.
    var self = this;
    playerRef.on('value', function(snapshot) {
      self.snapshot = snapshot;
      self.draw();
    });
    */
  };


  Cards.Controller = function (cardsRef) {
    this.cardsRef = cardsRef;

    // Import cards into stacks
    this.importCards();

    // Start game
    this.play();
  };


  Cards.Controller.prototype.importCards = function () {
    // Get stuff from Nick //XXX
    this.stacks = [];


    // Temp data

    var stackname = 'Mandarin stack';


    var stackRef = this.cardsRef.child('Mandarin stack');
    this.stacks[stackname] = new Array();

    for (var i = 0; i < 5; i++){
      var newcard = new Cards.Card("front stuff" + i, "back stuff" + i, "notes" + i);
      this.stacks[stackname].push(newcard);
      newcard.writeToFirebase(stackRef);
    }
   };


  /**
   * Once we've joined, enable controlling our player.
   */
  Cards.Controller.prototype.play = function () {
    var canvas = $("#canvas0").get(0);
    
    var context = canvas.getContext('2d');

<<<<<<< HEAD
=======
asdf.fillText("Hello World",10,50);    
>>>>>>> c1ab61bc31ab8219e0d0ceef26eda78530b88f0e
    this.displayCard();

    var self = this;

    $("#easyButton").click(function () {
      // Mark card as easy


      // Reinsert card


      // Display next card
      this.displayCard();
    });

    $("#hardButton").click(function () {
      // Mark card as hard


      // Reinsert card


      // Display next card
      this.displayCard();

    });

    $("#flipButton").click(function () {
      // flip card

    });

    //this.enableKeyboard();
  };

  Cards.Controller.prototype.displayCard = function () {
  
  
  }

  start();

</script>
</body>
</html>
